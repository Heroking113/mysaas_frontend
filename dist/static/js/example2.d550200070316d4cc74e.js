(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{306:function(e,t,r){"use strict";r.r(t);var a=r(322);var s=r(312);for(var n in s)if(n!=="default")(function(e){r.d(t,e,function(){return s[e]})})(n);var i=r(319);var c=r(12);var u=Object(c["a"])(s["default"],a["a"],a["b"],false,null,"47ce39cf",null);t["default"]=u.exports},312:function(e,t,r){"use strict";r.r(t);var a=r(313);var s=r.n(a);for(var n in a)if(n!=="default")(function(e){r.d(t,e,function(){return a[e]})})(n);t["default"]=s.a},313:function(e,t,r){"use strict";var a=r(2);Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=a(r(98));var n=a(r(99));var i={components:{},data:function e(){return{users:[{user_name:"所有用户"}],user_name:"",businesses:[{busi_name:"所有业务"}],busi_name:"",scripts:[{script_name:"所有任务"}],script_name:"",records:[],cur_records:[],record_num:0,current_page:1,page_size:10}},created:function e(){var t=this;this.$http.get("/records/").then(function(e){if(e.status===200){t.records=e.data;t.record_num=t.records.length;t.currentChangePage(t.records,t.current_page);t.filter_conditions()}})},mounted:function e(){(0,s.default)("#record").click(function(){(0,s.default)("#record").css("background","#008272")})},methods:{onQuery:function e(){var t=this;var r=(0,s.default)("#cur_business").val();var a=(0,s.default)("#cur_user").val();var n=(0,s.default)("#cur_script").val();var i={business:r,operator:a,mission:n};var c="/records/retrieve/?business="+r+"&operator="+a+"&mission="+n;this.$http.get(c).then(function(e){if(e.status===200){t.records=e.data;t.record_num=t.records.length;t.currentChangePage(t.records,t.current_page)}})},goExecute:function e(){this.$router.push({path:window.PROJECT_CONFIG.SITE_URL+"execute-task"})},handleSizeChange:function e(t){this.page_size=t;this.handleCurrentChange(this.current_page)},handleCurrentChange:function e(t){this.current_page=t;this.currentChangePage(this.records,t)},currentChangePage:function e(t,r){var a=(r-1)*this.page_size;var s=r*this.page_size;this.cur_records=[];for(;a<s;a++){if(t[a]){this.cur_records.push(t[a])}}},filter_conditions:function e(){var t=this;if(this.records){var r=[];var a=[];var s=[];this.records.forEach(function(e){r.push(e.operator);a.push(e.business);s.push(e.mission)});r=new Set(r);a=new Set(a);s=new Set(s);r.forEach(function(e){t.users.push({user_name:e})});a.forEach(function(e){t.businesses.push({busi_name:e})});s.forEach(function(e){t.scripts.push({script_name:e})})}}}};t.default=i},314:function(e,t,r){},319:function(e,t,r){"use strict";var a=r(314);var s=r.n(a);var n=s.a},322:function(e,t,r){"use strict";var a=function(){var e=this;var t=e.$createElement;var r=e._self._c||t;return r("div",[r("el-container",[r("el-header",{staticClass:"head-left-content"},[r("el-button",{staticClass:"navibar-button-style",attrs:{type:"primary"},on:{click:e.goExecute}},[e._v("执行任务")]),e._v(" "),r("el-button",{staticClass:"navibar-button-style",staticStyle:{"background-color":"#0a6659"},attrs:{id:"record",type:"primary"}},[e._v("任务记录")])],1)],1),e._v(" "),r("div",{staticClass:"table-style"},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:true}},[r("el-form-item",{attrs:{label:"业务"}},[r("el-select",{ref:"select_business",staticStyle:{width:"290px"},attrs:{id:"cur_business",placeholder:"请选择"},on:{change:e.get_select_business_label},model:{value:e.busi_name,callback:function(t){e.busi_name=t},expression:"busi_name"}},e._l(e.businesses,function(e){return r("el-option",{key:e.busi_name,attrs:{value:e.busi_name}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"用户"}},[r("el-select",{ref:"select_user",staticStyle:{width:"290px"},attrs:{id:"cur_user",placeholder:"请选择"},model:{value:e.user_name,callback:function(t){e.user_name=t},expression:"user_name"}},e._l(e.users,function(e){return r("el-option",{key:e.user_name,attrs:{value:e.user_name}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"任务"}},[r("el-select",{ref:"select_script",staticStyle:{width:"290px"},attrs:{id:"cur_script",placeholder:"请选择"},model:{value:e.script_name,callback:function(t){e.script_name=t},expression:"script_name"}},e._l(e.scripts,function(e){return r("el-option",{key:e.script_name,attrs:{value:e.script_name}})}),1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onQuery}},[e._v("查询")])],1)],1),e._v(" "),r("hr",{staticStyle:{FILTER:"alpha(opacity=100,finishopacity=0,style=3)"},attrs:{width:"100%",color:"gray",size:"1"}}),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cur_records,border:""}},[r("el-table-column",{attrs:{prop:"business",label:"业务",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{prop:"operator",label:"用户",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{prop:"mission",label:"任务",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{prop:"machine_num",label:"机器数",width:"150"}}),e._v(" "),r("el-table-column",{attrs:{prop:"status",label:"状态",width:"150"}}),e._v(" "),r("el-table-column",{attrs:{prop:"start_time",label:"操作时间",width:"250"}})],1),e._v(" "),r("div",{staticClass:"paginationClass",staticStyle:{float:"right"}},[r("el-pagination",{attrs:{"current-page":e.current_page,"page-sizes":[10,20,50,100],"page-size":e.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.record_num},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)};var s=[];r.d(t,"a",function(){return a});r.d(t,"b",function(){return s})}}]);